name = "goondan-registry"
main = "src/index.ts"
compatibility_date = "2024-12-01"
compatibility_flags = ["nodejs_compat"]

# R2 버킷 바인딩 (tarball 저장용)
[[r2_buckets]]
binding = "PACKAGES"
bucket_name = "goondan-packages"

# KV 네임스페이스 바인딩 (메타데이터 저장용)
[[kv_namespaces]]
binding = "METADATA"
id = "087bb97dab4344e28de4b71286976018"

# 환경 변수
[vars]
REGISTRY_URL = "https://goondan-registry.yechanny.workers.dev"

# 시크릿 (wrangler secret put ADMIN_TOKEN 으로 설정)
# ADMIN_TOKEN = "..."

# 개발 환경 설정
[dev]
port = 8787
local_protocol = "http"

# 프로덕션 환경
[env.production]
vars = { REGISTRY_URL = "https://registry.goondan.io" }
